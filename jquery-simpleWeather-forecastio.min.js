/*! simpleWeather-forecastio 2016-04-06 */
!function(a){"use strict";var b="YOUR_GEONAMES_USERNAME",c="YOUR_FORECASTIO_API_KEY";a.extend({simpleWeather:function(d){d=a.extend({location:"",woeid:"",unit:"us",success:function(a){},error:function(a){}},d);var e=(new Date,"http://api.geonames.org/search?callback=?&type=json&featureClass=P&username="+b+"&q="+d.location);return a.getJSON(encodeURI(e),function(b){if(null!==b&&b.totalResultsCount>0){var e=b.geonames[0],f="https://api.forecast.io/forecast/"+c+"/"+e.lat+","+e.lng+"?callback=?&units="+d.unit;a.getJSON(encodeURI(f),function(a){if(null!==a&&a.daily.data.length>0){var b,c=a.currently,f=a.daily.data,g={};g.title=c.summary,g.temp=Math.round(c.temperature),g.code=c.icon,g.todayCode=c.icon,g.icon=c.icon,g.currently=c.summary,g.high=Math.round(f[0].temperatureMax),g.low=Math.round(f[0].temperatureMin),g.text=f[0].summary,g.humidity=c.humidity,g.pressure=c.pressure,g.visibility=c.visibility,g.sunrise=moment.unix(f[0].sunriseTime).format("H:mm"),g.sunset=moment.unix(f[0].sunsetTime).format("H:mm"),g.description=c.symmary,g.city=e.name,g.country=e.countryCode,g.region=e.adminName1,g.updated=moment.unix(c.time).format(),g.forecast=[];for(var h=0;h<f.length;h++)f[h].day=moment.unix(f[h].time).format("ddd"),f[h].high=Math.round(f[h].temperatureMax),f[h].low=Math.round(f[h].temperatureMin),f[h].forecast=f[h].summary,b=f[h],g.forecast.push(b);d.success(g)}else d.error("There was a problem retrieving the latest weather information.")})}}),this}})}(jQuery);